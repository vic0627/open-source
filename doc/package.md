# 套件、軟體的安裝與管理

## 軟體（Software）

是指電腦系統中的程式碼和相關的資訊，它包括一系列指令，這些指令告訴電腦如何執行特定的任務。

軟體通常分為以下幾個主要類別：

1. 系統軟體：系統軟體是控制計算機硬體和提供基本服務的軟體，包括作業系統、驅動程式和其他管理硬體資源的工具。
2. 應用軟體：應用軟體是用戶直接使用的程序，旨在執行特定的任務或功能，包括辦公室套件、瀏覽器、圖像編輯器等。
3. 程式庫（Library）：程式庫是包含可重複使用的程式碼和功能的軟體元件，他們可以被其他軟體程序調用，簡化開發過程，提高程式碼重用性。
4. 開源軟體：開源軟體是可以免費使用、修改和分發的軟體，這些項目通常有一個社群支持，並遵循特定的開源許可協議。

## 原始碼安裝

從原始碼安裝成命令執行檔的步驟：

1. 獲取原始程式碼：命令的原始程式碼，通常以壓縮檔的形式提供在命令專案的官方網站或版本控制倉庫，可以直接使用 `wget` 指令下載。
2. 解壓縮原始碼：將下載的壓縮檔解壓縮到選擇的目錄中，通常通過 `tar -xzvf` 指令解壓縮。
3. 檢查依賴像：在編譯和安裝軟體之前，需要檢查命令的依賴像，這些是命令運行所需的其他程式庫和工具。通常，命令的官方文件會列出所需依賴。
4. 配置編譯環境：為了確保套件在特定環境中能夠正確運行，並滿足用戶的需求和期望，因此運行 `./configure` 指令來配置編譯環境。
5. 編譯原始碼：使用 `make` 指令編譯原始碼，這個指令會將原始碼轉換成可執行檔。
6. 安裝套件：使用 `make install` 指令安裝套件，這個指令會將編譯好的可執行檔安裝到系統的指定目錄中，但通常需要使用 `sudo` 指令來執行。
7. 清理：使用 `make clean` 指令清理編譯過程中產生的暫存檔案和物件檔案，這個指令會將編譯過程中產生的暫存檔案和物件檔案刪除，以釋放磁碟空間。
8. 驗證安裝：最後，使用 `make check` 指令驗證套件是否安裝成功，這個指令會執行套件的自動測試，確保套件在安裝後能夠正常運行。

## 套件安裝

- 為了快速安裝命令執行檔而將所有檔案放在一起的東西稱為套件（Package）。
- 套件通常指的是已經經過打包和準備好的套裝軟體，用於在特定作業系統上安裝和管理軟體。
  - 套件通常包括軟體程序 (二進制檔案)、軟體所需函式庫和安裝指南文件及使用手冊。
  - 這樣的套件系統使得安裝、升級和刪除軟體變得更加簡單，並幫助管理軟體的相依性。
- 這些套件通常是官方在管理，稱為『資源庫』。
- 在 Ubuntu 和 Debian 等發行版本中，可以使用 `apt` 命令來管理套件。

1. `sudo apt update`：更新本地端套件列表，以確保獲得最新的可用套件資訊
2. `sudo apt upgrade`：升級已安裝的套件，但不會安裝新的套件或刪除現有套件
3. `sudo apt dist-upgrade` （不建議使用）：升級系統上所有套件，包括已經被新版本替代的套件
4. `apt search <pkg_name>`：搜尋套件
5. `sudo apt install <pkg_name>`：安裝指定套件
6. `sudo apt remove <pkg_name>`：卸載套件
7. `sudo apt autoremove`：清理不再需要的套件及其依賴

## Deb 套件

Debian 套件（.deb）是 Debian Linux 發行版及其衍生發行版（如 Ubuntu）中使用的套件格式。deb 檔案是用於軟體安裝、卸載和管理的套件。

Debian 套件的基本認識：

1. 結構：Debian 套件是一個匯總了軟體、配置文件、安裝腳本等的**壓縮檔案**。它包含了用於在系統上安裝、配置和移除軟體的所有必要資訊。
2. 檔案類型：主要的 Debian 套件檔案擴展名是 .deb，這些檔案通常由 dpkg 套件管理工具使用。
3. 套件訊息：Debian 套件包含有關套件資訊的文件，如套件名稱、版本、依賴性、描述等，這些訊息被存儲在套件檔案的 DEBIAN/control 文件中。
4. 配置文件：Debian 套件可以包含用於配置軟體的檔案，這些檔案通常存儲在 /etc 目錄中。
5. 壓縮格式：.deb 檔案實際上是一個壓縮檔案，通常使用 gzip 或 xz 進行壓縮，可以使用 tar 命令解開它，然後再解開 data.tar.gz 或 data.tar.xz，以訪問套件中的內容。

Debian 套件（.deb）的命名結構遵循一定的規範，包括套件名稱、版本、架構等資訊。以下是 .deb 套件的命名結構的一般格式：

```
<pkg_name>_<version>_<architecture>.deb
```

- `<pkg_name>`：軟件包的名稱，用於標示套裝軟體，如 apache2、firefox
- `<version>`：套件版本號，數位與點號組合，如 2.4.41-1ubuntu1.4
- `<architecture>`：套件的體系結構，表示套件適用於哪種處理器架構，如 amd64（64 位元架構）、i386（32 位元架構）、armhf（ARM 硬浮點） 等

dpkg (Debian Package) 是用於管理 Debian 套件的低階工具：

1. `sudo dpkg -i <pkg.deb>` ：安裝某個 deb 套件
2. `dpkg -c <pkg.deb>`：列出某個 deb 套件包的檔案內容
3. `dpkg -f <pkg.deb> [field]`：查看某套件包的訊息，如套件名稱、版本、架構描述、維護者等，可以單獨指定要看的欄位
4. `dpkg -l <pkg_name>`：查看已安裝的套件包摘要清單
5. `dpkg -s <pkg_name>`：查看已安裝的套件包詳細訊息
6. `dpkg -L <pkg_name>`：查看已安裝的套件包所有文件
7. `sudo dpkg -r <pkg_name>`：檢查套件安裝過程中的依賴性
8. `sudo dpkg -P <pkg_name>`：卸載已安裝的套件包（連同配置文件）
9. `sudo dpkg -S <path_to_file>`：查詢某檔案屬於哪個已安裝套件
10. `sudo dpkg-reconfigure <pkg_name>`：重新配置已安裝的套件

有時安裝 .deb 套件會遇到依賴性問題，如果安裝過程中出現錯誤，通常是因為缺少其他依賴，此情況下可使用下列指令檢查並安裝缺少的依賴：

```bash
$ sudo apt-get install -f <pkg_name>
```
