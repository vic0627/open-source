# Shell 命令（ㄧ）

- [Shell 命令（ㄧ）](#shell-命令ㄧ)
  - [實用指令（一）](#實用指令一)
    - [將檔案的全部內容輸出到終端機](#將檔案的全部內容輸出到終端機)
    - [逐頁顯示檔案內容，允許使用空白鍵翻頁](#逐頁顯示檔案內容允許使用空白鍵翻頁)
    - [逐行或逐頁顯示檔案內容](#逐行或逐頁顯示檔案內容)
  - [tail 與 head](#tail-與-head)
    - [查看開頭](#查看開頭)
    - [查看末尾](#查看末尾)
  - [實用指令（二）](#實用指令二)
    - [將文本輸出到標準輸出（終端螢幕）](#將文本輸出到標準輸出終端螢幕)
    - [統計文字檔案內容的字元數（Characters）、單詞數（Words）和行數（Lines）](#統計文字檔案內容的字元數characters單詞數words和行數lines)
    - [按照字典順序對文本行進行排序](#按照字典順序對文本行進行排序)
    - [查詢檔案和目錄](#查詢檔案和目錄)
  - [擷取文字檔案片段](#擷取文字檔案片段)
    - [grep](#grep)
    - [cut](#cut)
    - [awk](#awk)
    - [sed](#sed)


## 實用指令（一）

### 將檔案的全部內容輸出到終端機

```shell
cat [選項] 檔案名
```

選項：

- `-n`：顯示內容及行號

### 逐頁顯示檔案內容，允許使用空白鍵翻頁

```shell
more [選項] 檔案名
```

### 逐行或逐頁顯示檔案內容

```shell
less [選項] 檔案名
```

選項：

- `-n`：顯示內容及行號

操作：

- 搜索文本：您可以按 `/` 鍵，然後輸入要搜索的文本，less 將突出顯示匹配的文本，然後使用 `n` 鍵和 `N` 鍵在檔中查找下一個和上一個匹配項。
- 移動：
  - `j`：向下一行
  - `k`：向上一行
  - 空白鍵：翻頁
  - `g`：跳轉到文件開頭
  - `G`：跳轉到文件末尾
- `q`：退出 less

## tail 與 head

用於快速查看文件開頭或結尾的命令，特別用於*大型檔案*。

### 查看開頭

```shell
head [選項] 檔案名
```

選項：

- `-n`：要顯示的行數。例如：`-n 5` 表示顯示前 5 行。
- `-c`：要顯示的*位元數*。例如：`-c 100` 顯示前 100 個位元組。

### 查看末尾

```shell
tail [選項] 檔案名
```

選項：

- `-n`：要顯示的行數。例如：`-n 5` 表示顯示前 5 行。
- `-c`：要顯示的*位元數*。例如：`-c 100` 顯示前 100 個位元組。
- `-f`：以「跟隨」模式顯示，用於即時監視檔案內容變化。

## 實用指令（二）

### 將文本輸出到標準輸出（終端螢幕）

```shell
echo [選項] 文本
```

選項：

- `-n`：輸出文本後不換行
- `-e`：啟用特殊字元轉義

### 統計文字檔案內容的字元數（Characters）、單詞數（Words）和行數（Lines）

```shell
wc [選項] 檔案名
```

選項：

- `-l`：僅顯示行數統計
- `-w`：僅顯示單詞數統計
- `-c`：僅顯示字元數統計
- `-m`：僅顯示字元數，類似 `-c`，但對多位元組字元的統計數可能不同
- `-L`：顯示行中最長的行的長度

### 按照字典順序對文本行進行排序

```shell
sort [選項] 文件名
```

選項：

- `-r`：降冪排序
- `-n`：按數值順序排序，而非字典順序
- `-k`：按指定列排序，例如 `-k 2` 表示按第二列排序
- `-t`：指定欄位分隔符，默認為定位字元

### 查詢檔案和目錄

按照指定的條件搜索檔案和目錄，以便進行檔案管理、資料恢復和檔案搜索等任務。

```shell
find 路徑 [選項] [匹配條件]
```

選項：

- `-name`：按檔案名稱進行匹配
- `-type`：按檔案類型進行匹配
- `-user`：按檔案擁有者進行匹配
- `-mtime`：按檔案修改時間進行匹配
- `-size`：按檔案大小進行匹配

## 擷取文字檔案片段

- `grep`：搜尋檔案中包含特定文字模式的行
- `cut`：從每一行剪出特定欄位
- `awk`：處理和分析文字檔案的內容，支援進階文本處理操作
- `sed`：對文字檔案執行編輯操作，支援查找和替換等操作

### grep

- 在文件檔中查找包含*特定文字匹配模式或字串*的行，並將匹配的行列印到*標準輸出*
- 通常與*規則運算式*一起使用，以實現進階的文本搜索和篩選

```shell
grep [選項] 模式 文件名...
```

選項：

- `-i`：忽略大小寫
- `-r`：遞迴搜索
- `-n`：顯示匹配的行號
- `-l`：僅顯示匹配的檔名

### cut

- 用於從文字檔中剪切內容
- 從文本行中*剪切出指定的欄位*，以便進行內容處理和資料提取

```shell
cut [選項] 檔案名
```

選項：

- `-c`：字元列表。根據字元位置剪切文本，例如 `-c 1-5,8-10` 表示剪切第 1 到 5 和第 8 到 10 個字元
- `-f`：欄位清單。根據欄位分隔符號剪切文件檔案，例如 `-f 2,4` 表示剪切第 2 和第 4 個欄位
- `-d`：分隔符號。指定欄位分隔符號，預設為定位字元 `\t`

### awk

- 處理和分析文本資料
- 按行讀取文字檔，根據指定的規則執行操作，並生成處理後的文本輸出
- awk 使用一種類似於程式設計的語法來定義操作

```shell
awk '模式 {操作}' 檔案名
```

參數：

- 模式：文本行的匹配條件，可省略
- 操作：條件匹配時執行的操作，輸出、計算、格式化等

範例：

```shell
# 印出 /etc/passwd 所有內容
awk '{print}' /etc/passwd

# $1、$2、$3 表示文本分割後的第ㄧ、二、三個欄位，預設分割符號是空格
awk '{print $1}' /etc/passwd

# 將內容以 : 分割，取出分割後的第一、六欄位
awk -F ':' '{print "字段 1：" $1, "字段 6：" $6}' /etc/passwd

# 輸出包含關鍵字 pi 的行
awk '/pi/ {print $1}' /etc/passwd
```

### sed

根據一組規格（模式）編輯文本流，可用於*替換、刪除、插入、過濾和格式化*等操作。

```shell
sed [選項] '編輯命令' 檔案名
```

選項：

- `-i`：直接在檔中編輯，而不是螢幕上顯示結果
- `-e`：允許指定多個編輯命令

編輯命令：替換、刪除、插入等


範例：

```shell
# 每行的第一個 bin 替換成 hello
sed 's/bin/hello/' /etc/passwd

# 每行的所有 bin 替換成 hello
sed 's/bin/hello/gg' /etc/passwd

# 刪除有關鍵字 root 的行
sed '/root/d' /etc/passwd

# 在有關鍵字 root 的行後面新增一行 hello
sed '/root/a hello' /etc/passwd

# 在每行行尾加入 `; end`
sed '/$/; end/' /etc/passwd

# 在第一行前插入 `This is first line`
sed '1i This is first line' /etc/passwd

# 執行多個編輯命令
# - 刪除關鍵字 root 的匹配行
# - 刪除關鍵字 pi 的匹配行
sed -e '/root/d' -e '/pi/d' /etc/passwd
```
